# Template file for 'vulkan-loader'
pkgname=vulkan-loader
version=1.3.283
revision=1
build_style=cmake
short_desc="Vulkan Installable Client Driver (ICD) loader"
maintainer="RobRx <robrx@posteo.de>"
license="Apache-2.0"
homepage="https://www.khronos.org/vulkan/"
distfiles="https://github.com/KhronosGroup/Vulkan-Loader/archive/vulkan-sdk-${version}.tar.gz"
checksum=b548e7283b123ecab8473094aff37fb993fb0e902cc5a72781ed24de3891c733

hostmakedepends="python3 pkg-config"
makedepends="Vulkan-Headers $(vopt_if x11 'libxcb-devel libxkbcommon-devel libXrandr-devel')
 $(vopt_if wayland wayland-devel)"

build_options="x11 wayland"
build_options_default="x11 wayland"

configure_args="-Wno-dev -DVULKAN_HEADERS_INSTALL_DIR=${XBPS_CROSS_BASE}/usr
 $(vopt_if x11 -DBUILD_WSI_XCB_SUPPORT=ON -DBUILD_WSI_XCB_SUPPORT=OFF)
 $(vopt_if x11 -DBUILD_WSI_XLIB_SUPPORT=ON -DBUILD_WSI_XLIB_SUPPORT=OFF)
 $(vopt_if wayland -DBUILD_WSI_WAYLAND_SUPPORT=ON -DBUILD_WSI_WAYLAND_SUPPORT=OFF)"
