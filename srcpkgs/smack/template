# Template file for 'smack'
pkgname=smack
version=1.4.0
revision=1
build_style=gnu-configure
hostmakedepends="pkg-config automake libtool doxygen"
makedepends="pam-devel"
short_desc="User space support for the Smack Linux Security Module"
maintainer="RobRx <robrx@posteo.de>"
license="LGPL-2.1-only"
homepage="https://schaufler-ca.com"
distfiles="https://github.com/smack-team/smack/archive/refs/heads/master.tar.gz"
checksum="24f193e3a7eccefaddd8a9a40deab3869e396d8accc856e4ed7a98a1ed7dfe74"

pre_configure() {
	autoreconf --install --symlink
}

libsmack_package() {
	short_desc+=" - Library"
	license="LGPL-2.1-only"
	pkg_install() {
		vmove "usr/lib/libsmack.so*"
		vmove usr/share/doc
		vmove usr/share/man/man3
	}
}

libsmack-devel_package() {
	short_desc+=" - Library development files"
	license="LGPL-2.1-only"
	depends="lib${sourcepkg}>=${version}_${revision}"
	pkg_install() {
		vmove usr/include
		vmove usr/lib/pkgconfig
		vmove usr/lib/libsmack.so
	}
}
