# Template file for 'Vulkan-Tools'
pkgname=Vulkan-Tools
version=1.3.283
revision=1
build_style=cmake
short_desc="Official Vulkan tools and utilities"
maintainer="RobRx <robrx@posteo.de>"
license="Apache-2.0"
homepage="https://www.khronos.org/vulkan/"
distfiles="https://github.com/KhronosGroup/Vulkan-Tools/archive/vulkan-sdk-${version}.tar.gz"
checksum=9d76c729a2288b23032d3cc1f8fa5a4aa2974ded617a7d5efd0a6e7b8154f0dd

hostmakedepends="python3 pkg-config glslang $(vopt_if wayland wayland-devel)"
makedepends="Vulkan-Headers vulkan-volk
 $(vopt_if x11 'libxcb-devel libxkbcommon-devel libXrandr-devel')
 $(vopt_if wayland 'wayland-devel wayland-protocols')"

build_options="x11 wayland"
build_options_default="x11 wayland"

configure_args="-DGLSLANG_INSTALL_DIR=/usr
 -DVULKAN_HEADERS_INSTALL_DIR=${XBPS_CROSS_BASE}/usr
 -DBUILD_WERROR=OFF -DBUILD_VULKANINFO=ON -DBUILD_CUBE=ON
 -DBUILD_ICD=ON $(vopt_if x11 -DBUILD_WSI_XCB_SUPPORT=ON -DBUILD_WSI_XCB_SUPPORT=OFF)
 $(vopt_if x11 -DBUILD_WSI_XLIB_SUPPORT=ON -DBUILD_WSI_XLIB_SUPPORT=OFF)
 $(vopt_if x11 -DCUBE_WSI_SELECTION=XCB -DCUBE_WSI_SELECTION=WAYLAND)
 $(vopt_if wayland -DBUILD_WSI_WAYLAND_SUPPORT=ON -DBUILD_WSI_WAYLAND_SUPPORT=OFF)
 $(vopt_if wayland -DWAYLAND_SCANNER_EXECUTABLE=/usr/bin/wayland-scanner)"
